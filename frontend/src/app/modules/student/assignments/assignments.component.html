<app-header></app-header>
<div class="assignments-container">
  <div class="page-header">
    <h1 class="page-title">My Assignments</h1>
    <p class="page-subtitle">Track and submit your coursework</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading assignments...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && assignments.length === 0" class="empty-state">
    <div class="empty-icon">ğŸ“</div>
    <h4 class="empty-title">No assignments yet</h4>
    <p class="empty-text">Your assignments will appear here when they're posted</p>
  </div>

  <!-- Assignments List -->
  <div *ngIf="!loading && assignments.length > 0" class="assignments-grid">
    <div *ngFor="let assignment of assignments" class="assignment-card">
      <!-- Card Header -->
      <div class="card-header-section">
        <div class="header-left">
          <div class="assignment-icon">ğŸ“</div>
          <div class="header-content">
            <h3 class="assignment-title">{{ assignment.title }}</h3>
            <p class="course-info">{{ assignment.course_code }} â€¢ {{ assignment.course_name }}</p>
          </div>
        </div>
        <span class="status-badge" [ngClass]="{
          'badge-warning': getStatusText(assignment) === 'Pending',
          'badge-info': getStatusText(assignment) === 'Submitted',
          'badge-success': getStatusText(assignment) === 'Graded',
          'badge-danger': getStatusText(assignment) === 'Overdue'
        }">
          {{ getStatusText(assignment) }}
        </span>
      </div>

      <!-- Description -->
      <p class="assignment-description">{{ assignment.description }}</p>

      <!-- Details Grid -->
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">Due Date</span>
          <span class="detail-value" [class.text-danger]="isOverdue(assignment.due_date)">
            {{ assignment.due_date | date:'MMM d, y â€¢ h:mm a' }}
          </span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Max Marks</span>
          <span class="detail-value">{{ assignment.max_marks }}</span>
        </div>
      </div>

      <!-- Instructions -->
      <div *ngIf="assignment.instructions" class="instructions-box">
        <div class="instructions-header">
          <span class="instructions-icon">ğŸ’¡</span>
          <span class="instructions-label">Instructions</span>
        </div>
        <p class="instructions-text">{{ assignment.instructions }}</p>
      </div>

      <!-- Actions / Submission Info -->
      <div class="card-footer-section">
        <button 
          *ngIf="canSubmit(assignment)"
          class="btn btn-primary"
          (click)="submitAssignment(assignment.id)">
          <span class="btn-icon">ğŸ“¤</span>
          <span>Submit Assignment</span>
        </button>
        
        <div *ngIf="assignment.submission_status" class="submission-info">
          <div class="info-item">
            <span class="info-icon">âœ“</span>
            <span class="info-text">Submitted on {{ assignment.submitted_at | date:'MMM d, y' }}</span>
          </div>
          <div *ngIf="assignment.submission_status === 'graded'" class="grade-display">
            <span class="grade-label">Grade:</span>
            <span class="grade-value">{{ assignment.marks_obtained }} / {{ assignment.max_marks }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
