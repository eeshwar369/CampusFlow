<div class="mindmap-container">
  <h2>Mind Map Helper</h2>
  <p class="subtitle">Upload your syllabus PDF to generate an interactive mind map with study resources</p>

  <!-- Upload Section -->
  <div class="upload-section card">
    <h3>Upload Syllabus PDF</h3>
    <div class="upload-form">
      <input type="file" 
             accept=".pdf" 
             (change)="onFileSelected($event)"
             [disabled]="uploading">
      <button (click)="uploadSyllabus()" 
              [disabled]="!selectedFile || uploading"
              class="btn-primary">
        {{ uploading ? 'Generating...' : 'Generate Mind Map' }}
      </button>
    </div>
    <div *ngIf="error" class="error-message">{{ error }}</div>
  </div>

  <!-- Mind Map Display -->
  <div *ngIf="mindMapData" class="mindmap-display card">
    <h3>Generated Mind Map</h3>
    <div class="mindmap-content">
      <div class="topics-tree">
        <div *ngFor="let topic of mindMapData.mindmap?.topics" class="topic-node">
          <h4>{{ topic.name }}</h4>
          <ul *ngIf="topic.subtopics">
            <li *ngFor="let subtopic of topic.subtopics">{{ subtopic }}</li>
          </ul>
        </div>
      </div>

      <!-- Study Resources -->
      <div class="resources-section">
        <h4>Study Resources</h4>
        <div *ngFor="let resource of mindMapData.resources" class="resource-item">
          <h5>{{ resource.topic }}</h5>
          <div class="resource-links">
            <a *ngFor="let link of resource.resources" 
               [href]="link.url" 
               target="_blank"
               class="resource-link">
              <span class="resource-type">{{ link.type }}</span>
              {{ link.title }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Saved Mind Maps -->
  <div class="saved-mindmaps card">
    <h3>Your Saved Mind Maps</h3>
    <div *ngIf="loading" class="loading">Loading...</div>
    <div *ngIf="!loading && savedMindMaps.length === 0" class="empty-state">
      No saved mind maps yet. Upload a syllabus to get started!
    </div>
    <div class="mindmap-list">
      <div *ngFor="let map of savedMindMaps" class="mindmap-item" (click)="viewMindMap(map)">
        <h4>{{ map.course_name }}</h4>
        <p>Generated: {{ map.generated_at | date:'short' }}</p>
        <span class="status" [class]="map.status">{{ map.status }}</span>
      </div>
    </div>
  </div>
</div>
